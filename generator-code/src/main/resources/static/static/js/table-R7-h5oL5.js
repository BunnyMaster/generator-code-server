var e=(e,t,a)=>new Promise(((s,r)=>{var o=e=>{try{i(a.next(e))}catch(t){r(t)}},n=e=>{try{i(a.throw(e))}catch(t){r(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,n);i((a=a.apply(e,t)).next())}));import{a7 as t,a8 as a,H as s}from"./vendor-BT0L8wkZ.js";const r=t.create({baseURL:"/api",timeout:5e4,headers:{"Content-Type":"application/json;charset=utf-8"},paramsSerializer:e=>a.stringify(e)});r.interceptors.request.use((e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization=t),e}),(e=>Promise.reject(e))),r.interceptors.response.use((e=>{if("blob"===e.config.responseType||"arraybuffer"===e.config.responseType)return e;if(200===e.status){const{code:t,message:a}=e.data;return 200!==t&&window.$message.error(a),e.data}return Promise.reject(e.data.message||"Error")}),(e=>{if(e.response.data){const{code:t,message:a}=e.response.data;500===t?window.$message.error(a):window.$message.error(a||"系统出错")}return Promise.reject(e.message)}));const o=()=>r({url:"/table/currentDatabaseName",method:"GET"}),n=s("tableStore",{state:()=>({currentDatabaseName:void 0,databaseInfoMeta:void 0,tableList:[],tableListLoading:!1,dbList:[]}),getters:{},actions:{getDatabaseInfoMeta(){return e(this,null,(function*(){const e=yield r({url:"/table/databaseInfoMetaData",method:"GET"});200===e.code&&(this.databaseInfoMeta=e.data)}))},getDatabaseList(){return e(this,null,(function*(){this.tableListLoading=!0;const e=yield r({url:"/table/databaseList",method:"GET"});if(200!==e.code)return void(this.tableListLoading=!1);const t=e.data.map((e=>({label:e.tableCat,value:e.tableCat,comment:e.comment})));t.unshift({label:"无",value:void 0,comment:"查询全部"}),this.dbList=t,this.tableListLoading=!1}))},getDatabaseTableList(){return e(this,null,(function*(){const e={dbName:this.currentDatabaseName},t=yield(a=e,r({url:"/table/databaseTableList",method:"get",params:a}));var a;this.tableList=t.data}))},getTableMetaData(t){return e(this,null,(function*(){const e=yield(a={tableName:t},r({url:"/table/tableMetaData",method:"get",params:a}));var a;return 200!==e.code?{}:e.data}))},getTableColumnInfo(t){return e(this,null,(function*(){const e=yield(a={tableName:t},r({url:"/table/tableColumnInfo",method:"get",params:a}));var a;return 200!==e.code?{}:e.data}))}}});export{o as g,r as s,n as u};
